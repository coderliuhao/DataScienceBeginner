### Mysql 学习笔记 使用子查询

1、查询即**select**语句，仅有一个**select**的查询为简单查询。出现嵌套在其他查询中的查询时，即创建了子查询。

2、子查询过滤数据时，通常出现在**where**子句中的 **in** 操作符后。首先将需求简化为一系列列步骤，层层递进，最终得到查询的结果。

​        引入mysql必知必会中的案例：

​                     (1) 检索包含物品TNT2的所有订单的编号。
​                     (2) 检索具有前一步骤列出的订单编号的所有客户的ID。
​                     (3) 检索前一步骤返回的所有客户ID的客户信息。

​        每一步的小目标简化为：

​                                             prod_id =>  order_num

​                                             order_num =>  cust_id

​                                             cust_id => cust_name,cust_contact...

​         实现查询的方式有两种;

​        （1）使用多个**select**语句，每一步单独作为一个查询，把前一步的返回结果用于本条**select**语句的**where**子句。

​        （2）使用子查询，即直接在第一步的**where**子句中嵌套一个**select**语句，在嵌套的这个**select**语句中再嵌套一个**select**。



3、创建子查询时，把最基本的步骤放在最内部的子查询，意味把最终的查询目标放在最外部。执行查询时，是由内向外逐步完成，执行到最外层得到查询结果。



4、子查询作为计算字段：使用聚集函数作为子查询生成计算字段，出现在**select**子句中，形如：

  **select col,(select agg_func() from col2 where expression ) as  cal_name**

5、涉及两表中存在相同列名的问题，使用完全限定的列名可以避免歧义，形如：

​                                        table1.col  =  table2.col      

6、子查询调试和查询调试时，首先建立并测试最内层的子查询，用子查询的结果
建立并测试外层查询，确认正常执行时嵌入子查询。